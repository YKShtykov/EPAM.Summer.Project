@using MvcApp.Infrastructure;
@model MvcApp.ViewModels.FullProfileInfo

@{
    ViewBag.Title = "UserProfile";
}

<div class="col-md-12" style="background-color:lightgray; padding:20px">
    <div class="row">
        <div class="col-md-3">
            @Html.Partial("_ProfilePhoto",Model.Profile.Id)
        </div>
        
        <div class="col-md-8"  style="background-color:white">
            <div>
                @Html.Partial("_ProfileInfo",Model.Profile)
                @{
                    var identity = (CustomIdentity)User.Identity;
                    if (identity.Id == Model.Profile.Id)
                    {
                        @Html.ActionLink("Edit", "Edit", null, new { @class = "btn btn-default" })
                    }

                }
                @Html.ActionLink("pdf", "UserInfoPdf", new { id = Model.Profile.Id }, new { @class = "btn btn-default" })
            </div>
        </div>
        <div class="col-md-offset-3 col-md-8" style="background-color:white; margin-top:10px">
            @Html.Partial("_ProfileSkills", Model.Categories)
            @if (identity.Id == Model.Profile.Id)
                {
                    @Html.ActionLink("Edit", "Index","Skill", null, new { @class = "btn btn-default" })
                }
        </div>
    </div>
</div>

@section scripts{
    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.css" rel="stylesheet">
    <link href="~/Content/star-rating.css" media="all" rel="stylesheet" type="text/css" />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.js"></script>
    <script src="~/Scripts/star-rating.js" type="text/javascript"></script>
    @foreach (var item in Model.Categories.Entities)
    {
        foreach (var skill in item.Skills)
        {
            string id = skill.Id.ToString();
            <script>
            $(document).on('ready', function () {
                $('#@id').rating({
                    step: 1,
                    displayOnly: true,
                    starCaptions: { 1: '', 2: '', 3: '', 4: '', 5: '' },
                    starCaptionClasses: function (val) { return 'text-success'; }
                });
            });
            </script>
        }
    }
}