@using MvcApp.Infrastructure;
@model MvcApp.ViewModels.GenericPaginationModel<MvcApp.ViewModels.MvcSkill>


@{
    ViewBag.Title = "Entities";
}
@using (Html.BeginForm())
{
    <h2>Entities</h2>
    <table class="table table-striped">
        <thead>
        <th></th>
        <th>
            Skill
        </th>
        <th>
            Category
        </th>
        </thead>
        <tbody>
            @for (int i = 0; i < Model.Entities.Count; i++)
            {
                <tr>
                    <td>
                        @Html.HiddenFor(x => x.Entities[i].Id)
                    </td>
                    <td>
                        @Html.HiddenFor(x => x.Entities[i].Name)
                        @Html.DisplayFor(x => x.Entities[i].Name)
                    </td>
                    <td>
                        @Html.HiddenFor(x => x.Entities[i].CategoryName)
                        @Html.DisplayFor(x => x.Entities[i].CategoryName)
                    </td>
                    @{
                        var identity = (CustomIdentity)User.Identity;

                        if (identity.Roles.FirstOrDefault(r => r == "Administrator") != null)
                        {
                            <td>
                                @Html.RouteLink("Edit", new { controller = "Skill", action = "EditSkill", id = Model.Entities[i].Id })
                            </td>
                            <td>
                                @Html.RouteLink("Remove", new { controller = "Skill", action = "RemoveSkill", id = Model.Entities[i].Id })
                            </td>
                        }
                    }
                </tr>
                        }
        </tbody>
    </table>

    <div class="btn-group">
        @Html.PageSubmit(Model.Pagination)
    </div>
    <div>
        @Html.ActionLink("Create skill", "CreateSkill", "Skill")
    </div>
                        }