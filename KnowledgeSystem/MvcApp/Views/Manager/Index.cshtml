@using MvcApp.Infrastructure;
@model MvcApp.ViewModels.GenericPaginationModel<MvcApp.ViewModels.SkillsModel>


@{
    ViewBag.Title = "Index";
    int skillsCount = ViewBag.Skills.Length;
}

<h2>Index</h2>
@using (Html.BeginForm())
{
    <div id="content">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>User Login</th>
                    @for (int i = 0; i < ViewBag.Skills.Length; i++)
                {
                        <th>
                            @{string id = "select" + i;
                            }
                            <select class="form-control" id="@id" name="selector">
                                @for (int j = 0; j < ViewBag.AllSkills.Length; j++)
                                {
                                    if (ViewBag.Skills[i] == ViewBag.AllSkills[j])
                                    {
                                        <option selected>@ViewBag.AllSkills[j]</option>
                                    }
                                    else
                                    {
                                        <option>@ViewBag.AllSkills[j]</option>
                                    }
                                }
                            </select>
                        </th>
                                }
                    @if (skillsCount < 5)
                {
                    for (int i = 0; i < 5 - skillsCount; i++)
                    {
                            <th>
                                <select class="form-control" name="selector">
                                    <option data-hidden="true"></option>
                                    @foreach (var option in ViewBag.AllSkills)
                                    {
                                        <option>@option</option>

                                    }
                                </select>
                            </th>

                        }
                    }
                </tr>

            </thead>
            <tbody>
                @foreach (var item in Model.Entities)
                {
                    <tr>
                        <td>@item.UserLogin</td>
                        @foreach (var item2 in item.Skills)
                        {
                            <td>@item2.Level</td>
                        }
                    </tr>

                }
            </tbody>
        </table>
    </div>
    <div class="btn-group">
        @Html.PageSubmit(Model.Pagination)
    </div>

    <div id="page-selection"></div>
    <div class="form-group col-md-2">
        <input type="submit" value="Save" class="btn btn-default" />
    </div>
}

@section scripts{

    <script>
        //$(document).ready(function () {
        //    $("input[name='page']").click(function (event) {
        //        event.preventDefault();
        //        url: '/Manager/Index'
        //        $.post(url, $('form').serialize(), function (response) {
        //            $('table').replaceAll(response);
        //        });
        //    });
        //});
    </script>
}